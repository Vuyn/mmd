<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>MMD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="" />
<meta name="author" content="http://webthemez.com" />
<!-- css -->
<link href="css/bootstrap.min.css" rel="stylesheet" />
<link href="css/fancybox/jquery.fancybox.css" rel="stylesheet">
<link href="css/jcarousel.css" rel="stylesheet" />
<link href="css/flexslider.css" rel="stylesheet" />
<link href="js/owl-carousel/owl.carousel.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet" />

<style>
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 18px;
        text-align: left;
    }
    th, td {
        padding: 12px;
        border: 1px solid #47a447;
    }
    th {
        background-color: #47a447;
        font-weight: bold;
    }
    tr:nth-child(even) {
        background-color: #47a447;
    }
</style>

</head>
<body>
<div id="wrapper">
	<!-- start header -->
	<header>
        <div class="navbar navbar-default navbar-static-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html"><img src="img/logo.png" alt="logo"/></a>
                </div>
                <div class="navbar-collapse collapse ">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="index.html">Home</a></li> 
						<li><a href="visualization.html">Visualization</a></li>
                    </ul>
                </div>
            </div>
        </div>
	</header>
	<!-- end header -->
	<section id="featured">
	 
	<!-- Slider -->
        <div id="main-slider" class="flexslider">
		
		<div class="flex-caption"> 
				<div class="container">
		<div class="row">
		<div class="col-md-6 col-sm-12">
		<div class="quick-search">
			 
					  <div class="row">
						<form role="form" id="predictionForm">
							<div class="col-md-6 col-sm-6 col-xs-6">
								<div class="form-group">
									<label for="LotArea">Diện tích nền (sq. ft)</label>
									<input type="number" class="form-control" id="LotArea" name="LotArea" required>
								</div>
								<div class="form-group">
									<label for="BedroomAbvGr">Số phòng ngủ</label>
									<input type="number" class="form-control" id="BedroomAbvGr" name="BedroomAbvGr" required>
								</div>
							</div>
							<div class="col-md-6 col-sm-6 col-xs-6">
								<div class="form-group">
									<label for="FullBath">Số nhà vệ sinh</label>
									<input type="number" class="form-control" id="FullBath" name="FullBath" required>
								</div>
								<div class="form-group">
									<label for="YearBuilt">Năm xây dựng</label>
									<input type="number" class="form-control" id="YearBuilt" name="YearBuilt" required>
								</div>
							</div>
							<div class="col-md-6 col-sm-6 col-xs-6">
								<div class="form-group">
									<label for="GrLivArea">Diện tích sàn (sq. ft)</label>
									<input type="number" class="form-control" id="GrLivArea" name="GrLivArea" required>
								</div>
								<div class="form-group">
									<label for="YearRemodAdd">Năm tu sửa</label>
									<input type="number" class="form-control" id="YearRemodAdd" name="YearRemodAdd" required>
								</div>
							</div>
							<div class="col-md-6 col-sm-6 col-xs-6">
								<div class="form-group">
									<label for="maxPrice">Giá tối đa</label>
									<input type="number" class="form-control" id="maxPrice" name="maxPrice" required>
								</div>
							</div>
							<div class="col-md-12 col-sm-12">
								<input name="submit" value="Tìm nhà" class="btn btn-success btn-lg btn-block" type="submit">
							</div>
						</form>						
					  </div>
					 
		</div></div>
		</div></div>
                </div>
            <ul class="slides">
			
              <li>
                <img src="img/slides/1.jpg" alt="" />
                
              </li>
              <li>
                <img src="img/slides/2.jpg" alt="" />
                
              </li>
              <li>
                <img src="img/slides/3.jpg" alt="" />
                
              </li>
            </ul>
        </div>
	<!-- end slider -->
 
	</section>
	<section class="hero-text">
	<div class="container">
		<div class="row">
			<div class="col-lg-12">
				<div class="aligncenter"><h1 class="aligncenter">Trang chủ dự đoán giá và đề xuất bất động sản</h1><p>Hãy nhập các thông tin cần thiết và chúng tôi sẽ cung cấp cho bạn kết quả theo yêu cầu</p></div>
				<div id="predictionResult"></div>
			</div>
		</div>
	</div>
	</section>
	<section id="content">

	
	<div class="container">

	<div class="row">
		<!-- Portfolio Projects -->
		<div class="row">
			<div class="col-lg-12">
				<h3>Thư <span class="color">viện</span></h3>
				<div class="row">
					<section id="projects">
					<ul id="thumbs" class="portfolio"> 
						<li class="col-lg-3 design" data-id="id-0" data-type="web">
						<div class="item-thumbs">					 
						<img src="img/works/1.jpg" alt="">
						</div>
						</li> 
						<!-- Item Project and Filter Name -->
						<li class="item-thumbs col-lg-3 design" data-id="id-1" data-type="icon">
						<img src="img/works/2.jpg" alt="">
						</li> 
						<li class="item-thumbs col-lg-3 photography" data-id="id-2" data-type="illustrator">
						<img src="img/works/3.jpg" alt="">
						</li>
						
						<li class="item-thumbs col-lg-3 photography" data-id="id-2" data-type="illustrator">					
						<img src="img/works/4.jpg" alt="">
						</li>
						<!-- End Item Project -->
					</ul>
					</section>
				</div>
				<div class="row">
					<section id="projects">
					<ul id="thumbs" class="portfolio"> 
						<li class="col-lg-3 design" data-id="id-0" data-type="web">
						<div class="item-thumbs">					 
						<img src="img/works/8.jpg" alt="">
						</div>
						</li> 
						<!-- Item Project and Filter Name -->
						<li class="item-thumbs col-lg-3 design" data-id="id-1" data-type="icon">
						<img src="img/works/5.jpg" alt="">
						</li> 
						<li class="item-thumbs col-lg-3 photography" data-id="id-2" data-type="illustrator">
						<img src="img/works/6.jpg" alt="">
						</li>
						
						<li class="item-thumbs col-lg-3 photography" data-id="id-2" data-type="illustrator">					
						<img src="img/works/7.jpg" alt="">
						</li>
						<!-- End Item Project -->
					</ul>
					</section>
				</div>
			</div>
		</div>

	</div>
	</section>
	<div class="testimonial-area">
    <div class="testimonial-solid">
        <div class="container">
            <div class="testi-icon-area">
                <div class="quote">
                    <i class="fa fa-microphone"></i>
                </div>
            </div>
            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carousel-example-generic" data-slide-to="0" class="">
                        <a href="#"></a>
                    </li>
                    <li data-target="#carousel-example-generic" data-slide-to="1" class="">
                        <a href="#"></a>
                    </li>
                    <li data-target="#carousel-example-generic" data-slide-to="2" class="active">
                        <a href="#"></a>
                    </li>
                </ol>
                <div class="carousel-inner">
                    <div class="item">
						<p>Đề xuất Bất động sản</p>
                        <p>
                            <b>- Lê Thanh Thiên -</b>
                        </p>
                    </div>
                    <div class="item">
						<p>Dự đoán giá nhà</p>
						<p>
                            <b>- Bùi Minh Vũ -</b>
                        </p>
                    </div>
                    <div class="item active">
						<p>Giao diện</p>
						<p>
                            <b>- Lê Minh Vũ -</b>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
	<footer>
	<div id="sub-footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-6">
					<div class="copyright">
						<p>
							<span>&copy; Khai thác Dữ liệu lớn </span><a target="_blank">K66A4</a>
						</p>
					</div>
				</div>
				<div class="col-lg-6">
					<ul class="social-network">
						<li><a href="#" data-placement="top" title="Facebook"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#" data-placement="top" title="Twitter"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#" data-placement="top" title="Linkedin"><i class="fa fa-linkedin"></i></a></li>
						<li><a href="#" data-placement="top" title="Pinterest"><i class="fa fa-pinterest"></i></a></li>
						<li><a href="#" data-placement="top" title="Google plus"><i class="fa fa-google-plus"></i></a></li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</footer>
</div>
<a href="#" class="scrollup"><i class="fa fa-angle-up active"></i></a>
<!-- javascript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="js/jquery.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.fancybox.pack.js"></script>
<script src="js/jquery.fancybox-media.js"></script> 
<script src="js/portfolio/jquery.quicksand.js"></script>
<script src="js/portfolio/setting.js"></script>
<script src="js/jquery.flexslider.js"></script>
<script src="js/animate.js"></script>
<script src="js/custom.js"></script>
<script src="js/owl-carousel/owl.carousel.js"></script>
<script>
    const form = document.getElementById('predictionForm');
    const resultDiv = document.getElementById('predictionResult');

    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        // Collect form data
        const lotArea = Number(document.getElementById('LotArea').value);
        const bedrooms = Number(document.getElementById('BedroomAbvGr').value);
        const fullBath = Number(document.getElementById('FullBath').value);
        const yearBuilt = Number(document.getElementById('YearBuilt').value);
        const grLivArea = Number(document.getElementById('GrLivArea').value);
        const yearRemodAdd = Number(document.getElementById('YearRemodAdd').value);
        const maxPrice = Number(document.getElementById('maxPrice').value);

        const features = [lotArea, bedrooms, fullBath, yearBuilt, grLivArea, yearRemodAdd];

        try {
            const response = await fetch('http://127.0.0.1:5000/recommend', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ max_price: maxPrice, features: features })
            });

            if (response.ok) {
                const data = await response.json();
				localStorage.setItem('recommendationData', JSON.stringify(data));
				resultDiv.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                // Generate a table to display the recommendations
                let table = `
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Property ID</th>
                                <th>Sale Price (USD)</th>
                                <th>Similarity Score</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                data.forEach(item => {
                    table += `
                        <tr>
                            <td>${item.Id}</td>
                            <td>${item.SalePrice.toLocaleString()}</td>
                            <td>${item.similarity.toFixed(2)}</td>
                        </tr>
                    `;
                });

                table += `
                        </tbody>
                    </table>
                `;

                resultDiv.innerHTML = table;
            } else {
                resultDiv.innerHTML = '<p>Error fetching recommendations. Please try again.</p>';
            }
        } catch (error) {
            resultDiv.innerHTML = `<p>Error: ${error.message}</p>`;
        }
    });
</script>
</body>
</html>